select-posh-theme.sh

This Bash script provides a convenient way to manage and preview your Oh My Posh themes using Rofi. It allows you to quickly switch between your locally installed themes or browse image previews fetched from the Oh My Posh documentation website (via a separate scraper script). It uses the feh image viewer to display previews and ex to modify your fish configuration.
Features

    Displays a Rofi menu listing your installed Oh My Posh themes.

    Allows you to select a theme to apply it to your fish shell configuration by modifying ~/.config/fish/config.fish using the ex command.

    Provides an option to browse theme preview images from a local JSON file (generated by scrape-posh-previews.sh), displayed using feh.

    Offers an option to open the selected theme's section on the official Oh My Posh documentation website using xdg-open.

Requirements

This script requires the following to be installed and configured on your system:

    bash: The shell to execute the script (standard on most Linux systems).

    rofi: A window switcher, application launcher, and dmenu replacement.

        Installation (Arch Linux): sudo pacman -S rofi

    jq: A lightweight and flexible command-line JSON processor (needed for browsing local previews).

        Installation (Arch Linux): sudo pacman -S jq

    feh: A fast and light image viewer (used to display image previews from URLs).

        Installation (Arch Linux): sudo pacman -S feh

    ex: A standard line editor used non-interactively for file modification (usually part of vim or vi packages, standard on most Linux systems).

    xdg-open: A utility to open files or URLs in the user's preferred application (used for opening documentation links, usually part of xdg-utils).

        Installation (Arch Linux): sudo pacman -S xdg-utils

    Oh My Posh: The prompt theme engine itself.

        Refer to the Oh My Posh installation guide for installation instructions.

    Installed Oh My Posh Themes: Theme files (.omp.json) located in the directory specified by the THEMES_DIR variable in the script (defaults to ~/.poshthemes).

    (Optional, for local previews) scrape-posh-previews.sh script and theme_previews.json file: The scraper script to generate the local JSON file containing image URLs.

        Refer to the README for scrape-posh-previews.sh for details on this script.

Installation

    Save the script: Copy the content of the select-posh-theme.sh script into a file named select-posh-theme.sh.

    Choose a location: Save this file to a directory that is included in your system's PATH environment variable. A standard location for user-specific scripts is ~/.local/bin/ (or within your posh-theme-selector/select-posh-theme/ directory if you are managing it in a Git repository).

    mkdir -p ~/.local/bin/
    # Then save the script content to ~/.local/bin/select-posh-theme.sh

    Make it executable: Give the script execute permissions.

    chmod +x ~/.local/bin/select-posh-theme.sh

    Verify PATH: Ensure ~/.local/bin/ is in your PATH. You can check with echo $PATH. If it's not, add fish_add_path ~/.local/bin to your ~/.config/fish/config.fish and restart your terminal.

Usage

To run the theme switcher script, simply open your terminal and execute it by name:

select-posh-theme.sh

A Rofi menu will appear with the following options:

    Installed Themes: A list of .omp.json files found in your themes directory. Selecting a theme name will present a second menu with options to "Apply Theme" or "Show Documentation Section".

    Browse Local Previews: (Appears if jq and feh are installed and theme_previews.json exists) Selecting this option will display a second Rofi menu listing image URLs from the local preview file. Selecting a URL will open the image using feh.

    Generate Local Previews (Run Scraper): (Appears if jq is installed but feh or theme_previews.json does not exist) Selecting this option will execute the scrape-posh-previews.sh script to generate the local preview file. You will then need to run select-posh-theme.sh again to browse the previews.

Applying a Theme:

If you select a theme and choose "Apply Theme", the script will modify your ~/.config/fish/config.fish file using the ex command to update the oh-my-posh init fish --config ... | source line to point to the selected theme file.

Note: For the theme change to take effect, you must open a new terminal session or manually source ~/.config/fish/config.fish in your current terminal.
Integration

This script works in conjunction with the scrape-posh-previews.sh script. The scraper script is responsible for fetching and maintaining the local theme_previews.json file that this switcher script reads from for the "Browse Local Previews" feature.

This README provides a comprehensive overview of the select-posh-theme.sh script.
